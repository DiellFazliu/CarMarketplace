<!DOCTYPE html>

<head lang="en">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width" , initial-scale="1.0">
    <link rel="stylesheet" href="project.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    
</head>

<body>
    <div id="section-1">
        <nav class="navbar">
            <ul>
                <li><a href="project.html"><img src="logo.png" class="logo"></a></li>
                <li class="name">AUTOSPHERE</li>
                <li><a href="project.html" class="line">Home</a></li>
                <li><a href="#" class="line">About</a></li>
                <li><a href="/howitworks.html" class="line">How it works</a></li>
                <li><a href="/reviews.html" class="line">Reviews</a></li>
                <li><a href="#" class="favorite trigger-favorites"><i class="fa-regular fa-heart" id="icon-regular"></i>
                        <i class="fa-solid fa-heart" id="icon-solid"></i></a></li>

                <li class="dropdown">
                    <div>
                        <a href="#" class="dropbtn"><i class="fa-regular fa-user"></i>Login</a>
                        <ul class="dropdown-content">
                            <li class="login-text trigger-favorites"><a href="#"><i
                                        class="fa-regular fa-heart"></i>Favorite cars</a></li>
                            <input id="button" type="submit" value="Login" onclick="window.location.href='login.html';">
                            <li>
                                <div class="sign-up">
                                    <a>Don't have an account?</a> <a href="register.html" class="sign" style="color: rgb(141, 224, 32);text-decoration: none;
                            font-weight: 500;"> <br> Sign up</a>
                                </div>
                            </li>
                        </ul>
                    </div>
                </li>
            </ul>
        </nav>
    </div>
    <div id="section-2">
        <div id="sllogani">
            <p id="slg0">Drive Your Dream</p>
            <p id="slg">Only a Click Away!</p>
        </div>
        <div id="section-3">
            <div class="right">
                <div class="horizontale">
                    <div>
                        <button class="btnMenu" id="brandButton">Brand &nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            &#9660;</button>
                        <ul style="list-style: none; padding: 0; margin: 0; display: none; max-height: 100px; overflow-y: scroll; border: 1px solid #ddd;"
                            class="Menu" id="brandMenu">
                            <li><a href="#" data-brand="Mercedes">Mercedes Benz</a></li>
                            <li><a href="#" data-brand="Audi">Audi</a></li>
                            <li><a href="#" data-brand="BMW">BMW</a></li>
                        </ul>
                    </div>
                    <div>
                        <button class="btnMenu" id="modelButton">Model&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            &#9660;</button>
                        <ul style="list-style: none; padding: 0; margin: 0; display: none; max-height: 150px; overflow-y: scroll; border: 1px solid #ddd;"
                            class="Menu" id="modelMenu">

                        </ul>
                    </div>
                </div>
                <script>
                    $(document).ready(function () {
                        let selectedBrand = "";
                        let selectedModel = "";

                        const models = {
                            Mercedes: ["A Class", "B Class", "C Class", "E Class", "S Class", "GLA", "GLB", "GLE", "GLS", "Maybach"],
                            Audi: ["A1", "A3", "A4", "A5", "A6", "A7", "A8L", "Q2", "Q3", "Q5", "Q7", "Q8", "E-tron"],
                            BMW: ["Series 1", "Series 3", "Series 4", "Series 5", "X1", "X2", "X3", "X4", "X5", "X6", "X7", "I7"]
                        };

                        const combinations = {
                            "mercedes": "mercedes.html",
                            "mercedes-a-class": "mercedesA.html",
                        };

                        $("#brandMenu a").click(function (e) {
                            e.preventDefault();
                            selectedBrand = $(this).data("brand");
                            $("#brandButton").text(selectedBrand);
                            $("#brandMenu").slideUp(500);

                            const modelList = models[selectedBrand] || [];
                            const modelItems = modelList.map(model => `<li><a href="#">${model}</a></li>`).join("");
                            $("#modelMenu").html(modelItems);
                            $("#modelButton").text("Model");
                        });

                        $("#modelMenu").on("click", "a", function (e) {
                            e.preventDefault();
                            selectedModel = $(this).text();
                            $("#modelButton").text(selectedModel);
                            $("#modelMenu").slideUp(500);
                        });

                        $("#extrapart").click(function () {
                            if (selectedBrand) {
                                let key = selectedBrand.toLowerCase().replace(/\s+/g, '-');
                                if (selectedModel) key += '-' + selectedModel.toLowerCase().replace(/\s+/g, '-');

                                if (combinations[key]) {
                                    window.location.href = combinations[key];
                                } else {
                                    alert("No page found for this combination. Please select valid options.");
                                }
                            } else {
                                alert("Please select a brand.");
                            }
                        });

                        $(".btnMenu").click(function () {
                            const menuId = $(this).attr("id").replace("Button", "Menu");
                            $(".Menu").not(`#${menuId}`).slideUp(500);
                            $(`#${menuId}`).stop(true, true).slideToggle(500);
                        });
                    });

                </script>

                <input id="extrapart" class="extra-part" type="submit" value="Search"
                    style="height: 32px; width: 170px; border:rgba(141,224,32,1); background: #8de020 ;color:white">
            </div>
        </div>
    </div>

    <div id="favorites-modal"
        style="display: none; position: fixed; top: 20%; left: 50%; transform: translate(-50%, -20%); width: 80%; background: white; border: 1px solid #ddd; padding: 20px; border-radius: 5px; box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2); z-index: 1000;">
        <h2>Favorites</h2>
        <div id="favorites-container" style="display: flex; flex-wrap: wrap; gap: 20px;">
        </div>
        <button id="close-favorites"
            style="background: #8de020; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; margin-top: 20px;">Close</button>
    </div>
    <div id="overlay"
        style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.5); z-index: 999;">
    </div>

    <div id="available-cars" style="padding: 20px; margin-top: 20px; background: white;">
        <h2 style="text-align: center;">Deals of the Week</h2>
        <div id="cars-container" style="display: flex; flex-wrap: wrap; gap: 20px;">
        </div>
    </div>

    <script>
        $(document).ready(function () {
            const cars = [
                { id: 1, brand: "Mercedes", model: "E Class", price: "$69,900", image: "Mercedes-Benz/E-class/normal/e7.jfif" },
                { id: 2, brand: "Audi", model: "A3 Cabriolet", price: "$37,000", image: "Audi/A3/kabriolet/a1.jfif" },
                { id: 3, brand: "Mercedes", model: "S Class", price: "$130,000", image: "Mercedes-Benz/S-class/normal/s.jfif" },
                { id: 4, brand: "Mercedes", model: "C Class", price: "$37,200", image: "Mercedes-Benz/C-class/coupe/c2.jfif" },
                { id: 5, brand: "Audi", model: "S8", price: "$65,000", image: "Audi/A8/s8/a1.jfif" },
                { id: 6, brand: "Audi", model: "A6", price: "$41,500", image: "Audi/A6/normal/a.jfif" }

            ];

            const carsContainer = $("#cars-container");
            cars.forEach(car => {
                const carCard = `
            <div class="car-card" style="border: 1px solid #ddd; padding: 10px; width: 380px; border-radius: 5px; text-align: center;">
                <img src="${car.image}" alt="${car.brand} ${car.model}" style="width: 100%; height: auto; border-radius: 5px;">
                <h3>${car.brand} ${car.model}</h3>
                <p>Price: ${car.price}</p>
                <button class="favorite-btn" data-id="${car.id}" style="background: #8de020; color: white; border: none; padding: 5px 10px; border-radius: 5px; cursor: pointer;">Favorite</button>
            </div>
        `;
                carsContainer.append(carCard);
            });

            $(".favorite-btn").click(function () {
                const carId = $(this).data("id");
                let favorites = JSON.parse(localStorage.getItem("favorites")) || [];

                if (!favorites.includes(carId)) {
                    favorites.push(carId);
                    localStorage.setItem("favorites", JSON.stringify(favorites));


                    $(this).text("Added")
                        .prop("disabled", true)
                        .css("background-color", "#ccc");
                }
            });

            function renderFavorites() {
                const favorites = JSON.parse(localStorage.getItem("favorites")) || [];
                const favoritesContainer = $("#favorites-container");
                favoritesContainer.empty();

                if (favorites.length === 0) {
                    favoritesContainer.html("<p>No cars in your favorites.</p>");
                } else {
                    favorites.forEach(carId => {
                        const car = cars.find(c => c.id === carId);
                        if (car) {
                            const carCard = `
                        <div class="car-card" style="border: 1px solid #ddd; padding: 10px; width: 480px; border-radius: 5px; text-align: center;">
                            <img src="${car.image}" alt="${car.brand} ${car.model}" style="width: 100%; height: auto; border-radius: 5px;">
                            <h3>${car.brand} ${car.model}</h3>
                            <p>Price: ${car.price}</p>
                            <button class="remove-from-favorites-btn" data-id="${car.id}" style="background: red; color: white; border: none; padding: 5px 10px; border-radius: 5px; cursor: pointer;">Remove</button>
                        </div>
                    `;
                            favoritesContainer.append(carCard);
                        }
                    });
                }
            }

            $(".trigger-favorites").click(function (e) {
                e.preventDefault();
                renderFavorites();
                $("#favorites-modal").show();
                $("#overlay").show();
            });

            $("#close-favorites, #overlay").click(function () {
                $("#favorites-modal").hide();
                $("#overlay").hide();
            });

            $("#favorites-container").on("click", ".remove-from-favorites-btn", function () {
                const carId = $(this).data("id");
                let favorites = JSON.parse(localStorage.getItem("favorites")) || [];
                favorites = favorites.filter(id => id !== carId);
                localStorage.setItem("favorites", JSON.stringify(favorites));

                $(".favorite-btn[data-id='" + carId + "']").text("Favorite").prop("disabled", false).css("background-color", "#8de020");;

                renderFavorites();
            });
        });
    </script>
</body>
</html>